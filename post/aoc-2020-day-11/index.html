<!doctype html><html lang=en-us prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# dct: http://purl.org/dc/terms/ cc: https://creativecommons.org/ns#"><head><meta charset=utf-8><title>Advent of Code 2020 Day 11 // Textfile</title><link rel=canonical href=https://chriswmartin.github.io/post/aoc-2020-day-11/><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=google-site-verification content><meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1"><link rel=stylesheet href=https://chriswmartin.github.io/css/tufte.min.acd23ca1b4025980b5f8d66777380c0976afea1bbb6c2c7888e6970ce198d3f0.css integrity="sha256-rNI8obQCWYC1+NZndzgMCXav6hu7bCx4iOaXDOGY0/A=" rel="preload stylesheet" as=style media="screen, print"><link rel=stylesheet href=https://chriswmartin.github.io/css/print.min.e203d0f5058bbcf7333b4ebb6c421131a5145944f583faa5cda0166bb9158cb1.css integrity="sha256-4gPQ9QWLvPczO067bEIRMaUUWUT1g/qlzaAWa7kVjLE=" rel="preload stylesheet" as=style media=print><link rel=stylesheet href=https://chriswmartin.github.io/css/syntax.min.846eba9d06f76c1cddcbd1810a214895cc68adda2f9191d61f77830b8f3a7350.css integrity="sha256-hG66nQb3bBzdy9GBCiFIlcxordovkZHWH3eDC486c1A=" rel="preload stylesheet" as=style media="screen, print"><link rel=alternate type=application/json href=https://chriswmartin.github.io/index.json title="Textfile JSON Feed"><link rel=alternate type=application/rss+xml href=https://chriswmartin.github.io/index.xml title="Textfile RSS Feed"><link rel=alternate type=application/atom href=https://chriswmartin.github.io/index.atom title="Textfile atom Feed"><link rel=me href=https://github.com/chriswmartin title=github.com/chriswmartin><link rel=amphtml href=https://chriswmartin.github.io/amp/post/aoc-2020-day-11/><meta property="og:title" content="Advent of Code 2020 Day 11"><meta property="og:description" content="This year&rsquo;s Advent of Code&rsquo;s day 11 challenge &ndash; Seating System was a type of cellular automata task where one needed to model the eventual seating positions of individuals who are waiting to board a ferry.
To create our visualizations first we generate a new, random initial seating layout based off of the AoC examples
def generate_layout(rows, columns): chars = ['L', '.'] layout = [] for _ in range(rows): column = [] for _ in range(columns): column."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="og:url" content="https://chriswmartin.github.io/post/aoc-2020-day-11/"><meta property="og:image" content="https://chriswmartin.github.ioimages/takeonrules.wordpress.com-banner.jpg"><meta property="og:image:width" content="1000"><meta property="og:image:height" content="288"><meta property="article:published_time" content="2020-12-12T12:25:09-04:00"><meta property="article:modified_time" content="2021-03-21T16:57:17Z"><meta property="og:updated_time" content="2021-03-21T16:57:17Z"><meta name=description content="This year‚Äôs Advent of Code‚Äôs day 11 challenge ‚Äì Seating System was a type of cellular automata task where one needed to model the eventual seating positions of individuals who are waiting to board a ferry.
To create our visualizations first we generate a new, random initial seating layout based off of the AoC examples
def generate_layout(rows, columns): chars = ['L', '.'] layout = [] for _ in range(rows): column = [] for _ in range(columns): column."><meta name=dateModified content="2021-03-21T16:57:17Z"><meta name=datePublished content="2020-12-12T12:25:09-04:00"><meta name=twitter:title content="Advent of Code 2020 Day 11"><meta name=twitter:description content="This year‚Äôs Advent of Code‚Äôs day 11 challenge ‚Äì Seating System was a type of cellular automata task where one needed to model the eventual seating positions of individuals who are waiting to board a ferry.
To create our visualizations first we generate a new, random initial seating layout based off of the AoC examples
def generate_layout(rows, columns): chars = ['L', '.'] layout = [] for _ in range(rows): column = [] for _ in range(columns): column."></head><body class="type-post default-width" itemscope itemtype=http://schema.org/WebPage><header aria-label="Site header"><meta itemprop=speakable content="https://chriswmartin.github.io/post/aoc-2020-day-11/#skip-to-content"><link itemprop=relatedLink href=https://chriswmartin.github.io/post/introduction-to-the-web/><nav class=group role=list aria-label="Site navigation" itemscope itemtype=http://schema.org/SiteNavigationElement><meta itemprop=name content="Site navigation"><a href=#skip-to-content itemprop=hasPart class=offscreen>Skip to Main Content</a><h1><a role=listitem itemprop=hasPart rel=home href=https://chriswmartin.github.io title="Homepage of Textfile">üè† Textfile</a></h1><span class=nav-divider>//</span>
<a class=nav-item role=listitem itemprop=hasPart href=https://chriswmartin.github.io/index.xml title="RSS feed">RSS</a><span class=hidden> &#183;</span></nav><hr></header><main class=group aria-label="Main Content"><nav itemprop=breadcrumb aria-labelledby=breadcrumbs-label class=breadcrumb itemscope itemtype=http://schema.org/BreadcrumbList><span role=list><span id=breadcrumbs-label itemprop=name class=label>Breadcrumb</span>
<span role=listitem itemprop=itemListElement itemscope itemtype=http://schema.org/ListItem><span itemprop=name><a class=header-path itemprop=item href=https://chriswmartin.github.io>~</a></span><meta itemprop=position content="1"></span>/
<cite id=https://chriswmartin.github.io/post/aoc-2020-day-11/ class=header-path aria-current=page>Advent_of_Code_2020_Day_11.txt</cite></span></nav><hr class=hidden><article itemprop=mainEntity class=h-entry itemid=#skip-to-content id=skip-to-content aria-labelledby=advent-of-code-2020-day-11 itemscope itemtype=http://schema.org/BlogPosting><header aria-label="Article header"><link itemprop=mainEntityOfPage href=https://chriswmartin.github.io/post/aoc-2020-day-11/#skip-to-content><h1 itemprop=headline class=p-name id=advent-of-code-2020-day-11>Advent of Code 2020 Day 11</h1><meta itemprop=name content="Advent of Code 2020 Day 11"></header><section itemprop=articleBody class="content e-content" itemid=#content aria-label=Content><p>This year&rsquo;s Advent of Code&rsquo;s day 11 challenge &ndash; <a href=https://adventofcode.com/2020/day/11>Seating System</a> was a type of <a href=https://en.wikipedia.org/wiki/Cellular_automaton>cellular automata</a> task where one needed to model the eventual seating positions of individuals who are waiting to board a ferry.</p><p>To create our visualizations first we generate a new, random initial seating layout based off of the AoC examples</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>generate_layout</span><span class=p>(</span><span class=n>rows</span><span class=p>,</span> <span class=n>columns</span><span class=p>):</span>
    <span class=n>chars</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;L&#39;</span><span class=p>,</span> <span class=s1>&#39;.&#39;</span><span class=p>]</span>
    <span class=n>layout</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>rows</span><span class=p>):</span>
        <span class=n>column</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>columns</span><span class=p>):</span>
            <span class=n>column</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>chars</span><span class=p>))</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>row</span><span class=p>)</span>
    <span class=k>return</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span></code></pre></div><p>this returns a two dimensional array like</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text>[
    [&#39;.&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;],
    [&#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;],
    [&#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;],
    [&#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;],
    [&#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;],
    [&#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;]
]</code></pre></div><p>next we have <code>print_layout()</code> which gives us a nicer representation of our seats</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>print_layout</span><span class=p>(</span><span class=n>seat_array</span><span class=p>):</span>
    <span class=n>layout</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
    <span class=k>for</span> <span class=n>column</span> <span class=ow>in</span> <span class=n>seat_array</span><span class=p>:</span>
        <span class=n>c</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
        <span class=k>for</span> <span class=n>seat</span> <span class=ow>in</span> <span class=n>column</span><span class=p>:</span>
          <span class=n>c</span> <span class=o>+=</span> <span class=n>seat</span>
        <span class=n>layout</span> <span class=o>+=</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=n>c</span>
    <span class=k>return</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-text data-lang=text>...L.L.L.L
.LLLLLL...
..LL.LLLLL
LLL.LLLLL.
..LL.L..LL
L.LL.LL.LL
L..L.L.LLL
.LL....L.L
..L.LLL...
LLL.LL..LL</code></pre></div><p>The fun thing about this function is that is gives us lot of flexibility in how we represent this data. For example we can draw our seats using <a href=https://en.wikipedia.org/wiki/Block_Elements>unicode block elements</a>.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>print_layout</span><span class=p>(</span><span class=n>seat_array</span><span class=p>):</span>
    <span class=n>layout</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
    <span class=k>for</span> <span class=n>column</span> <span class=ow>in</span> <span class=n>seat_array</span><span class=p>:</span>
        <span class=n>c</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
        <span class=k>for</span> <span class=n>seat</span> <span class=ow>in</span> <span class=n>column</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>seat</span> <span class=o>==</span> <span class=s1>&#39;.&#39;</span><span class=p>:</span> <span class=n>c</span> <span class=o>+=</span> <span class=s1>&#39; &#39;</span>
            <span class=k>if</span> <span class=n>seat</span> <span class=o>==</span> <span class=s1>&#39;#&#39;</span><span class=p>:</span> <span class=n>c</span> <span class=o>+=</span> <span class=s1>&#39;‚ñì&#39;</span>
            <span class=k>if</span> <span class=n>seat</span> <span class=o>==</span> <span class=s1>&#39;L&#39;</span><span class=p>:</span> <span class=n>c</span> <span class=o>+=</span> <span class=s1>&#39;‚ñí&#39;</span>
        <span class=n>layout</span> <span class=o>+=</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=n>c</span>
    <span class=k>return</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-text data-lang=text> ‚ñì ‚ñë‚ñì‚ñì‚ñë‚ñì ‚ñì
‚ñì ‚ñë ‚ñë‚ñë ‚ñë ‚ñì
‚ñì ‚ñë     ‚ñë
‚ñë ‚ñë‚ñì ‚ñë   ‚ñë
‚ñì‚ñë ‚ñë‚ñë ‚ñì‚ñì‚ñë‚ñì
‚ñë‚ñì‚ñì  ‚ñë‚ñì‚ñë
 ‚ñë‚ñë ‚ñë ‚ñë‚ñë‚ñì
‚ñì‚ñì  ‚ñë‚ñì
    ‚ñë‚ñë ‚ñì‚ñë‚ñë
    ‚ñì‚ñë  ‚ñë‚ñì</code></pre></div><p>Then we can create an animation of our generated layouts reaching equilibrium</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>while</span> <span class=bp>True</span><span class=p>:</span>
  <span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=s1>&#39;clear&#39;</span><span class=p>)</span>

  <span class=n>rows</span><span class=p>,</span> <span class=n>columns</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>popen</span><span class=p>(</span><span class=s1>&#39;stty size&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>
  <span class=n>layout</span> <span class=o>=</span> <span class=n>generate_layout</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>columns</span><span class=p>),</span> <span class=nb>int</span><span class=p>(</span><span class=n>rows</span><span class=p>))</span>
  <span class=n>seats</span> <span class=o>=</span> <span class=n>model_seats</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span>

  <span class=n>occupied_seat_counts</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>]</span>
  <span class=k>while</span> <span class=bp>True</span><span class=p>:</span>
    <span class=n>seats</span> <span class=o>=</span> <span class=n>model_seats</span><span class=p>(</span><span class=n>seats</span><span class=p>)</span> <span class=c1># model the next seat layout</span>

    <span class=n>layout</span> <span class=o>=</span> <span class=n>print_layout</span><span class=p>(</span><span class=n>seats</span><span class=p>)</span>
    <span class=k>print</span><span class=p>(</span><span class=n>layout</span><span class=p>,</span> <span class=n>flush</span><span class=o>=</span><span class=bp>True</span><span class=p>)</span> <span class=c1># display our new seat layout</span>

    <span class=n>occupied_seats</span> <span class=o>=</span> <span class=n>layout</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;‚ñì&#39;</span><span class=p>)</span> <span class=c1># this should be whichever</span>
                                       <span class=c1># char you use to represent</span>
                                       <span class=c1># occupied seats</span>
    <span class=k>if</span> <span class=n>occupied_seats</span> <span class=o>==</span> <span class=n>occupied_seat_counts</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]:</span>
      <span class=k>break</span> <span class=c1># if the number of occupied seats has not changed since</span>
            <span class=c1># the previous run break and start on new seating layout</span>
    <span class=k>else</span><span class=p>:</span>
      <span class=n>occupied_seat_counts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>occupied_seats</span><span class=p>)</span></code></pre></div><p>You can see <a href=https://gist.github.com/chriswmartin/3e0b42f64bbbbd215d72e0ee8d5100e2>the full code</a> and <a href="https://repl.it/@0xcm/aoc2020day11part1?lite=true&outputonly=1">run it in your browser</a>.</p></section></article></main><footer class="group credits" aria-label="Site-wide footer"><hr></footer></body></html>