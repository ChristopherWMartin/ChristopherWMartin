<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet type=text/css href=https://textfile.io/css/styles.css><link rel=stylesheet type=text/css href=https://textfile.io/css/syntax.css><link rel=alternate type=application/rss+xml href=https://textfile.io/index.xml title="Textfile RSS Feed"><link rel=alternate type=application/atom href=https://textfile.io/index.atom title="Textfile atom Feed"><title>Textfile | Advent of Code 2020 Day 11</title></head><body><span class=home-link><a href=https://textfile.io>← Home</a></span><div id=content><h1>Advent of Code 2020 Day 11</h1><br><p>This year&rsquo;s Advent of Code&rsquo;s day 11 challenge &ndash; <a href=https://adventofcode.com/2020/day/11>Seating System</a> was a type of <a href=https://en.wikipedia.org/wiki/Cellular_automaton>cellular automata</a> task where one needed to model the eventual seating positions of individuals who are waiting to board a ferry.</p><p>To create our visualizations first we generate a new, random initial seating layout based off of the AoC examples</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>generate_layout</span><span class=p>(</span><span class=n>rows</span><span class=p>,</span> <span class=n>columns</span><span class=p>):</span>
    <span class=n>chars</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;L&#39;</span><span class=p>,</span> <span class=s1>&#39;.&#39;</span><span class=p>]</span>
    <span class=n>layout</span> <span class=o>=</span> <span class=p>[]</span>
    <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>rows</span><span class=p>):</span>
        <span class=n>column</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>columns</span><span class=p>):</span>
            <span class=n>column</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>random</span><span class=o>.</span><span class=n>choice</span><span class=p>(</span><span class=n>chars</span><span class=p>))</span>
        <span class=n>layout</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>row</span><span class=p>)</span>
    <span class=k>return</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span></code></pre></div><p>this returns a two dimensional array like</p><div class=highlight><pre class=chroma><code class=language-text data-lang=text>[
    [&#39;.&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;],
    [&#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;],
    [&#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;],
    [&#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;],
    [&#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;],
    [&#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;.&#39;],
    [&#39;L&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;, &#39;.&#39;, &#39;.&#39;, &#39;L&#39;, &#39;L&#39;]
]</code></pre></div><p>next we have <code>print_layout()</code> which gives us a nicer representation of our seats</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>print_layout</span><span class=p>(</span><span class=n>seat_array</span><span class=p>):</span>
    <span class=n>layout</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
    <span class=k>for</span> <span class=n>column</span> <span class=ow>in</span> <span class=n>seat_array</span><span class=p>:</span>
        <span class=n>c</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
        <span class=k>for</span> <span class=n>seat</span> <span class=ow>in</span> <span class=n>column</span><span class=p>:</span>
          <span class=n>c</span> <span class=o>+=</span> <span class=n>seat</span>
        <span class=n>layout</span> <span class=o>+=</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=n>c</span>
    <span class=k>return</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-text data-lang=text>...L.L.L.L
.LLLLLL...
..LL.LLLLL
LLL.LLLLL.
..LL.L..LL
L.LL.LL.LL
L..L.L.LLL
.LL....L.L
..L.LLL...
LLL.LL..LL</code></pre></div><p>The fun thing about this function is that is gives us lot of flexibility in how we represent this data. For example we can draw our seats using <a href=https://en.wikipedia.org/wiki/Block_Elements>unicode block elements</a>.</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>def</span> <span class=nf>print_layout</span><span class=p>(</span><span class=n>seat_array</span><span class=p>):</span>
    <span class=n>layout</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
    <span class=k>for</span> <span class=n>column</span> <span class=ow>in</span> <span class=n>seat_array</span><span class=p>:</span>
        <span class=n>c</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span>
        <span class=k>for</span> <span class=n>seat</span> <span class=ow>in</span> <span class=n>column</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>seat</span> <span class=o>==</span> <span class=s1>&#39;.&#39;</span><span class=p>:</span> <span class=n>c</span> <span class=o>+=</span> <span class=s1>&#39; &#39;</span>
            <span class=k>if</span> <span class=n>seat</span> <span class=o>==</span> <span class=s1>&#39;#&#39;</span><span class=p>:</span> <span class=n>c</span> <span class=o>+=</span> <span class=s1>&#39;▓&#39;</span>
            <span class=k>if</span> <span class=n>seat</span> <span class=o>==</span> <span class=s1>&#39;L&#39;</span><span class=p>:</span> <span class=n>c</span> <span class=o>+=</span> <span class=s1>&#39;▒&#39;</span>
        <span class=n>layout</span> <span class=o>+=</span> <span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span> <span class=o>+</span> <span class=n>c</span>
    <span class=k>return</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span></code></pre></div><div class=highlight><pre class=chroma><code class=language-text data-lang=text> ▓ ░▓▓░▓ ▓
▓ ░ ░░ ░ ▓
▓ ░     ░
░ ░▓ ░   ░
▓░ ░░ ▓▓░▓
░▓▓  ░▓░
 ░░ ░ ░░▓
▓▓  ░▓
    ░░ ▓░░
    ▓░  ░▓</code></pre></div><p>Then we can create an animation of our generated layouts reaching equilibrium</p><div class=highlight><pre class=chroma><code class=language-python data-lang=python><span class=k>while</span> <span class=bp>True</span><span class=p>:</span>
  <span class=n>os</span><span class=o>.</span><span class=n>system</span><span class=p>(</span><span class=s1>&#39;clear&#39;</span><span class=p>)</span>

  <span class=n>rows</span><span class=p>,</span> <span class=n>columns</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>popen</span><span class=p>(</span><span class=s1>&#39;stty size&#39;</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>)</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>split</span><span class=p>()</span>
  <span class=n>layout</span> <span class=o>=</span> <span class=n>generate_layout</span><span class=p>(</span><span class=nb>int</span><span class=p>(</span><span class=n>columns</span><span class=p>),</span> <span class=nb>int</span><span class=p>(</span><span class=n>rows</span><span class=p>))</span>
  <span class=n>seats</span> <span class=o>=</span> <span class=n>model_seats</span><span class=p>(</span><span class=n>layout</span><span class=p>)</span>

  <span class=n>occupied_seat_counts</span> <span class=o>=</span> <span class=p>[</span><span class=mi>0</span><span class=p>]</span>
  <span class=k>while</span> <span class=bp>True</span><span class=p>:</span>
    <span class=n>seats</span> <span class=o>=</span> <span class=n>model_seats</span><span class=p>(</span><span class=n>seats</span><span class=p>)</span> <span class=c1># model the next seat layout</span>

    <span class=n>layout</span> <span class=o>=</span> <span class=n>print_layout</span><span class=p>(</span><span class=n>seats</span><span class=p>)</span>
    <span class=k>print</span><span class=p>(</span><span class=n>layout</span><span class=p>,</span> <span class=n>flush</span><span class=o>=</span><span class=bp>True</span><span class=p>)</span> <span class=c1># display our new seat layout</span>

    <span class=n>occupied_seats</span> <span class=o>=</span> <span class=n>layout</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;▓&#39;</span><span class=p>)</span> <span class=c1># this should be whichever</span>
                                       <span class=c1># char you use to represent</span>
                                       <span class=c1># occupied seats</span>
    <span class=k>if</span> <span class=n>occupied_seats</span> <span class=o>==</span> <span class=n>occupied_seat_counts</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]:</span>
      <span class=k>break</span> <span class=c1># if the number of occupied seats has not changed since</span>
            <span class=c1># the previous run break and start on new seating layout</span>
    <span class=k>else</span><span class=p>:</span>
      <span class=n>occupied_seat_counts</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>occupied_seats</span><span class=p>)</span></code></pre></div><p>You can see <a href=https://gist.github.com/chriswmartin/3e0b42f64bbbbd215d72e0ee8d5100e2>the full code</a> and <a href="https://repl.it/@0xcm/aoc2020day11part1?lite=true&outputonly=1">run it in your browser</a>.</p></div><footer><hr><span class=inline-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328.0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765.0 183.105.0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686.0 38.981.0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg></span><a href=https://textfile.io/index.xml>rss</a>
/
<a href=https://textfile.io/index.atom>atom</a></footer></body></html>